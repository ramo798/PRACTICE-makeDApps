<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js/dist/web3.min.js"></script>
<script type="text/javascript">	

	const web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:7545"));
		
	//コントラクトを呼び出すアカウントのアドレス
	let coinbase = web3.eth.accounts[6];
	
	//コントラクトのアドレス
	const address = "0xe6FabBEb51a4762f7aC6B90f4e05EC6307C9E3F3";
    //ABI情報

    const abi = [
    {
      "constant": true,
      "inputs": [
        {
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "lands",
      "outputs": [
        {
          "name": "owner",
          "type": "address"
        },
        {
          "name": "landname",
          "type": "string"
        },
        {
          "name": "power",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "_index",
          "type": "uint256"
        },
        {
          "name": "_landname",
          "type": "string"
        },
        {
          "name": "_power",
          "type": "uint256"
        }
      ],
      "name": "setLand",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "name": "_index",
          "type": "uint256"
        }
      ],
      "name": "getLanddata",
      "outputs": [
        {
          "name": "",
          "type": "address"
        },
        {
          "name": "",
          "type": "string"
        },
        {
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "_index",
          "type": "uint256"
        },
        {
          "name": "_landname",
          "type": "string"
        },
        {
          "name": "_power",
          "type": "uint256"
        }
      ],
      "name": "Battleland",
      "outputs": [
        {
          "name": "",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ]
	
	
	//コントラクトのインスタンスを生成
  const contract = web3.eth.contract(abi).at(address);
    
	// let response1 = contract.setLand.sendTransaction(0,"マサラタウン",100,{from:coinbase,gas:3000000});
  // console.log("response:",response1);
  // let response2 = contract.setLand.sendTransaction(1,"トキワシティ",100,{from:coinbase,gas:3000000});
  // console.log("response:",response2);
  // let response3 = contract.setLand.sendTransaction(2,"ニビシティ",100,{from:coinbase,gas:3000000});
  // console.log("response:",response3);
  // let response4 = contract.setLand.sendTransaction(3,"ハナダシティ",100,{from:coinbase,gas:3000000});
  // console.log("response:",response4);
  // let response5 = contract.setLand.sendTransaction(4,"クチバシティ",100,{from:coinbase,gas:3000000});
  // console.log("response:",response5);
  // let response6 = contract.setLand.sendTransaction(5,"シオンタウン",100,{from:coinbase,gas:3000000});
  // console.log("response:",response6);
  // let response7 = contract.setLand.sendTransaction(6,"タムマシティ",100,{from:coinbase,gas:3000000});
  // console.log("response:",response7);
  // let response8 = contract.setLand.sendTransaction(7,"セキクチシティ",100,{from:coinbase,gas:3000000});
  // console.log("response:",response8);
  // let response9 = contract.setLand.sendTransaction(8,"ヤマブキシティ",100,{from:coinbase,gas:3000000});
  // console.log("response:",response9);
  // let response10 = contract.setLand.sendTransaction(9,"グレンタウン",100,{from:coinbase,gas:3000000});
  // console.log("response:",response10);
  
	let name1 = contract.getLanddata.call(0);
  console.log("owner:",name1[0]);
  console.log("landname:",name1[1]);
  console.log("power:",name1[2].c[0]);

  let name2 = contract.getLanddata.call(1);
  console.log("owner:",name2[0]);
  console.log("landname:",name2[1]);
  console.log("power:",name2[2].c[0]);

  let battle1 = contract.Battleland.sendTransaction(0,"ミナモタウン",200,{from:coinbase,gas:3000000});
  console.log(battle1);

  let name11 = contract.getLanddata.call(0);
  console.log("owner:",name11[0]);
  console.log("landname:",name11[1]);
  console.log("power:",name11[2].c[0]);

  let battle2 = contract.Battleland.sendTransaction(0,"モコウタウン",2200,{from:coinbase,gas:3000000});
  console.log(battle2);

  let name12 = contract.getLanddata.call(0);
  console.log("owner:",name12[0]);
  console.log("landname:",name12[1]);
  console.log("power:",name12[2].c[0]);

  // let name3 = contract.getLanddata.call(2);
  // console.log("owner:",name3[0]);
  // console.log("landname:",name3[1]);
  // console.log("power:",name3[2].c[0]);

  // let name4 = contract.getLanddata.call(3);
  // console.log("owner:",name4[0]);
  // console.log("landname:",name4[1]);
  // console.log("power:",name4[2].c[0]);

  // let name5 = contract.getLanddata.call(4);
  // console.log("owner:",name5[0]);
  // console.log("landname:",name5[1]);
  // console.log("power:",name5[2].c[0]);
    
</script>
</head>
<body>
 
</body>
</html>